% Generated by hand
\name{hwsd_extract}
\alias{hwsd_extract}
\title{Extract HWSD v2.0 attributes (point or bbox)}
\usage{
hwsd_extract(coords = NULL, bbox = NULL, param = "ALL", layer = "D1",
  path = tempdir(), ws_path = file.path(tempdir(), "ws_db"), internal = TRUE,
  tiles_deg = Inf, cores = 1, verbose = FALSE)
}
\arguments{
\item{coords}{Point input for extraction. Can be:
\itemize{
  \item Numeric vector c(lon, lat) for a single point;
  \item A matrix with 2 columns (lon, lat) for multiple points;
  \item A data.frame/tibble with columns lon and lat for multiple points.
}}

\item{bbox}{Numeric vector c(lon_min, lat_min, lon_max, lat_max) or an \code{sf} bbox for a bounding box. Provide either \code{coords} or \code{bbox}, not both.}
\item{param}{Character vector of property names; \code{"ALL"} selects all available attributes (numeric-only for bbox).}
\item{layer}{Soil layer code (\code{"D1"}--\code{"D7"}).}
\item{path}{Output path when writing raster (used if \code{internal = FALSE}).}
\item{ws_path}{Path to HWSD index grid; will be downloaded if missing.}
\item{internal}{If \code{TRUE}, return in-memory raster; if \code{FALSE}, write to \code{path}.}
\item{tiles_deg}{Optional tiling size (degrees) for large bboxes; when finite and smaller than extent, tiles are processed and mosaicked.}
\item{cores}{Number of cores for tiling; uses \code{parallel::mclapply} on non-Windows.}
\item{verbose}{Show progress messages.}
}
\value{
tibble for point queries; \code{terra::SpatRaster} (or file path if \code{internal=FALSE}) for bbox queries.
}
\description{
Extract HWSD v2.0 attributes for points or bounding boxes using the downloaded index grid and bundled attribute table.
}
\examples{
\dontrun{
# point query (tibble)
hwsd_extract(
  coords = c(120, 30),
  param = c("SAND", "PH_WATER"),
  layer = "D1",
  ws_path = "D:/data/HWSD2"
)

# multiple points (data frame)
pts <- data.frame(
  lon = c(120, 121.5),
  lat = c(30, 31.2)
)
hwsd_extract(
  coords = pts,
  param = "SAND",
  layer = "D1",
  ws_path = "D:/data/HWSD2"
)

# bbox query (SpatRaster) with tiling for large areas
hwsd_extract(
  bbox = c(70, 18, 140, 54),
  param = "SAND",
  layer = "D1",
  ws_path = "D:/data/HWSD2",
  tiles_deg = 5,
  cores = 4,
  internal = TRUE
)
}
}
